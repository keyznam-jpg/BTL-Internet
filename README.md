# Há»‡ Thá»‘ng Quáº£n LÃ½ KhÃ¡ch Sáº¡n PTIT

## MÃ´ táº£ dá»± Ã¡n

ÄÃ¢y lÃ  má»™t há»‡ thá»‘ng quáº£n lÃ½ khÃ¡ch sáº¡n toÃ n diá»‡n Ä‘Æ°á»£c phÃ¡t triá»ƒn báº±ng Python Flask, cho phÃ©p quáº£n lÃ½ cÃ¡c hoáº¡t Ä‘á»™ng hÃ ng ngÃ y cá»§a khÃ¡ch sáº¡n nhÆ° Ä‘áº·t phÃ²ng, nháº­n/tráº£ phÃ²ng, thanh toÃ¡n, quáº£n lÃ½ dá»‹ch vá»¥, giao tiáº¿p vá»›i khÃ¡ch hÃ ng qua chat vÃ  email, quáº£n lÃ½ nhÃ¢n viÃªn vÃ  lÆ°Æ¡ng, cháº¥m cÃ´ng, vÃ  bÃ¡o cÃ¡o doanh thu.

Há»‡ thá»‘ng há»— trá»£ cáº£ giao diá»‡n web cho nhÃ¢n viÃªn quáº£n lÃ½ vÃ  khÃ¡ch hÃ ng Ä‘áº·t phÃ²ng online.

## ğŸš€ Cáº£i thiá»‡n hiá»‡u suáº¥t (T10/2025)

### Tá»‘i Æ°u hÃ³a Ä‘Ã£ triá»ƒn khai:
- âœ… **Compression**: Flask-Compress Ä‘á»ƒ nÃ©n response HTTP (giáº£m bandwidth)
- âœ… **Database Pooling**: SQLAlchemy connection pool (10 connections, 20 overflow)
- âœ… **Query Optimization**: ThÃªm joinedload cho cÃ¡c relationship phá»©c táº¡p
- âœ… **Static Files Caching**: Cache-Control headers cho static files (1 giá»)
- âœ… **Connection Recycling**: Pool recycle má»—i giá» Ä‘á»ƒ trÃ¡nh stale connections

### Hiá»‡u suáº¥t Æ°á»›c tÃ­nh sau tá»‘i Æ°u:
- **Thá»i gian táº£i trang**: Giáº£m 30-50% nhá» compression vÃ  caching
- **Database connections**: TÃ¡i sá»­ dá»¥ng thay vÃ¬ táº¡o má»›i
- **Memory usage**: Giáº£m nhá» connection pooling
- **Scalability**: Há»— trá»£ tá»‘t hÆ¡n 100+ concurrent users

## TÃ­nh nÄƒng chÃ­nh

### ğŸ¨ Quáº£n lÃ½ phÃ²ng
- SÆ¡ Ä‘á»“ phÃ²ng trá»±c quan vá»›i tráº¡ng thÃ¡i real-time
- PhÃ¢n loáº¡i phÃ²ng (TiÃªu chuáº©n, Superior, Deluxe, Suite)
- Theo dÃµi tráº¡ng thÃ¡i phÃ²ng (trá»‘ng, Ä‘Ã£ Ä‘áº·t, Ä‘ang á»Ÿ, quÃ¡ giá»)

### ğŸ“… Äáº·t phÃ²ng
- Äáº·t phÃ²ng offline (nhÃ¢n viÃªn)
- Äáº·t phÃ²ng online (khÃ¡ch hÃ ng tá»± Ä‘áº·t)
- Há»— trá»£ thuÃª theo ngÃ y hoáº·c giá»
- TÃ­nh tiá»n cá»c tá»± Ä‘á»™ng (30% giÃ¡ phÃ²ng)

### ğŸ’³ Thanh toÃ¡n
- Thanh toÃ¡n tiá»n máº·t hoáº·c chuyá»ƒn khoáº£n QR (VietQR)
- TÃ­ch há»£p QR code cho thanh toÃ¡n online
- Quáº£n lÃ½ session thanh toÃ¡n vá»›i timeout 5 phÃºt
- XÃ¡c nháº­n thanh toÃ¡n tá»± Ä‘á»™ng

### ğŸ›ï¸ Dá»‹ch vá»¥ bá»• sung
- Quáº£n lÃ½ danh má»¥c dá»‹ch vá»¥ (Äƒn uá»‘ng, giáº·t á»§i, spa, v.v.)
- Äáº·t dá»‹ch vá»¥ trong phÃ²ng
- Thanh toÃ¡n dá»‹ch vá»¥ riÃªng biá»‡t

### ğŸ’¬ Giao tiáº¿p
- Chat real-time giá»¯a khÃ¡ch hÃ ng vÃ  nhÃ¢n viÃªn
- Há»‡ thá»‘ng tin nháº¯n vá»›i token riÃªng cho má»—i Ä‘áº·t phÃ²ng
- Upload file trong chat (áº£nh, tÃ i liá»‡u)

### ğŸ“§ Email tá»± Ä‘á»™ng
- Template email cÃ³ thá»ƒ tÃ¹y chá»‰nh
- Gá»­i email thÃ´ng bÃ¡o tráº¡ng thÃ¡i Ä‘áº·t phÃ²ng
- Lá»‹ch sá»­ gá»­i email

### ğŸ« Voucher
- Táº¡o voucher tá»± Ä‘á»™ng cho khÃ¡ch hÃ ng
- Cáº¥u hÃ¬nh tá»· lá»‡ giáº£m giÃ¡ vÃ  thá»i háº¡n
- Quáº£n lÃ½ voucher Ä‘Ã£ sá»­ dá»¥ng

### ğŸ‘¥ Quáº£n lÃ½ nhÃ¢n viÃªn
- PhÃ¢n quyá»n admin/nhÃ¢n viÃªn
- Cháº¥m cÃ´ng hÃ ng ngÃ y
- PhÃª duyá»‡t cháº¥m cÃ´ng (admin)
- Quáº£n lÃ½ lÆ°Æ¡ng cÆ¡ báº£n vÃ  phá»¥ cáº¥p
- TÃ­nh thÆ°á»Ÿng theo doanh thu

### ğŸ“Š BÃ¡o cÃ¡o vÃ  thá»‘ng kÃª
- Thá»‘ng kÃª doanh thu theo thÃ¡ng/nÄƒm
- BÃ¡o cÃ¡o khÃ¡ch hÃ ng
- Xuáº¥t bÃ¡o cÃ¡o Excel/PDF

### âš™ï¸ CÃ i Ä‘áº·t há»‡ thá»‘ng
- Cáº¥u hÃ¬nh email SMTP
- CÃ i Ä‘áº·t thÃ´ng sá»‘ voucher
- Quáº£n lÃ½ cáº¥u hÃ¬nh há»‡ thá»‘ng

## CÃ´ng nghá»‡ sá»­ dá»¥ng

### Backend
- **Python 3.x**
- **Flask** - Web framework
- **Flask-SQLAlchemy** - ORM cho database
- **Flask-Login** - Quáº£n lÃ½ authentication
- **Flask-SocketIO** - Real-time communication
- **Flask-Caching** - Caching
- **Flask-Migrate** - Database migrations
- **Flask-Compress** - Compression

### Database
- **MySQL** vá»›i PyMySQL driver
- Schema Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `schema.sql`

### Frontend
- **HTML5**, **CSS3**, **JavaScript**
- **Font Awesome** - Icons
- **FullCalendar** - Lá»‹ch Ä‘áº·t phÃ²ng
- **QRCode** - Táº¡o QR code

### ThÆ° viá»‡n khÃ¡c
- **pandas** - Xá»­ lÃ½ dá»¯ liá»‡u
- **openpyxl** - Xuáº¥t Excel
- **reportlab** - Táº¡o PDF
- **APScheduler** - LÃªn lá»‹ch tÃ¡c vá»¥
- **qrcode[pil]** - Táº¡o QR code
- **python-dotenv** - Quáº£n lÃ½ biáº¿n mÃ´i trÆ°á»ng

## CÃ i Ä‘áº·t vÃ  cháº¡y

### YÃªu cáº§u há»‡ thá»‘ng
- Python 3.8+
- MySQL 5.7+
- Git

### 1. Clone repository
```bash
git clone https://github.com/keyznam-jpg/BTL-Internet.git
cd BTL-Internet
```

### 2. CÃ i Ä‘áº·t dependencies
```bash
pip install -r requirements.txt
```

### 3. Cáº¥u hÃ¬nh database
- Táº¡o database MySQL tÃªn `Internet`
- Import schema tá»« file `schema_internet.sql`
- Cáº¥u hÃ¬nh biáº¿n mÃ´i trÆ°á»ng trong file `.env`:
```env
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=your_password
MYSQL_DB=Internet
SECRET_KEY=your_secret_key
PUBLIC_BASE_URL=http://localhost:5000

# Cáº¥u hÃ¬nh VietQR (tÃ¹y chá»n)
VIETQR_BANK_ID=970423
VIETQR_ACCOUNT_NO=99992162001
VIETQR_BANK_NAME=TPBank
VIETQR_ACCOUNT_NAME=KhÃ¡ch sáº¡n PTIT
DEPOSIT_PERCENT=0.3

# Cáº¥u hÃ¬nh email SMTP (tÃ¹y chá»n)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password
```

### 4. Cháº¡y á»©ng dá»¥ng
- Sá»­ dá»¥ng file `run.bat` (Windows):
```cmd
run.bat
```
- Hoáº·c cháº¡y thá»§ cÃ´ng:
```bash
python app.py
```
- á»¨ng dá»¥ng sáº½ cháº¡y táº¡i `http://127.0.0.1:5000`

### 5. Backup database
- Sá»­ dá»¥ng file `backup.bat` Ä‘á»ƒ backup database tá»± Ä‘á»™ng

## Cáº¥u trÃºc thÆ° má»¥c

```
BTL-Internet/
â”œâ”€â”€ app.py                      # File chÃ­nh cá»§a á»©ng dá»¥ng Flask
â”œâ”€â”€ schema_internet.sql         # Schema database MySQL
â”œâ”€â”€ requirements.txt            # Dependencies Python
â”œâ”€â”€ run.bat                     # Script cháº¡y á»©ng dá»¥ng (Windows)
â”œâ”€â”€ backup.bat                  # Script backup database
â”œâ”€â”€ static/                     # Static files (CSS, JS, images)
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css           # CSS chÃ­nh
â”‚   â”‚   â”œâ”€â”€ dashboard.css       # CSS dashboard
â”‚   â”‚   â”œâ”€â”€ login.css           # CSS trang Ä‘Äƒng nháº­p
â”‚   â”‚   â””â”€â”€ ...                 # CSS khÃ¡c
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ payments.js         # JS xá»­ lÃ½ thanh toÃ¡n
â”‚   â”‚   â”œâ”€â”€ voucher_check.js    # JS kiá»ƒm tra voucher
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ img/                    # HÃ¬nh áº£nh
â”œâ”€â”€ templates/                  # Templates HTML
â”‚   â”œâ”€â”€ base.html               # Template cÆ¡ sá»Ÿ
â”‚   â”œâ”€â”€ dashboard.html          # Trang dashboard
â”‚   â”œâ”€â”€ login.html              # Trang Ä‘Äƒng nháº­p
â”‚   â”œâ”€â”€ dat_phong.html          # Trang Ä‘áº·t phÃ²ng
â”‚   â”œâ”€â”€ so_do_phong.html        # SÆ¡ Ä‘á»“ phÃ²ng
â”‚   â”œâ”€â”€ tin_nhan.html           # Trang tin nháº¯n
â”‚   â””â”€â”€ ...                     # CÃ¡c template khÃ¡c
â””â”€â”€ Pháº§n má»m cáº§n cÃ i Ä‘áº·t/       # TÃ i liá»‡u hÆ°á»›ng dáº«n cÃ i Ä‘áº·t
```

## TÃ i khoáº£n máº·c Ä‘á»‹nh

### Admin
- Username: `admin`
- Password: `admin`

### NhÃ¢n viÃªn máº«u
- Username: `nam`, Password: `123`
- Username: `keyz`, Password: `123`
- Username: `hoang`, Password: `123`
- Username: `hung`, Password: `123`

## API Endpoints chÃ­nh

### Authentication
- `GET/POST /login` - ÄÄƒng nháº­p
- `GET /logout` - ÄÄƒng xuáº¥t

### Dashboard
- `GET /dashboard` - Trang chá»§ vá»›i thá»‘ng kÃª

### Quáº£n lÃ½ phÃ²ng
- `GET /so-do-phong` - SÆ¡ Ä‘á»“ phÃ²ng
- `GET/POST /dat-phong` - Äáº·t phÃ²ng offline
- `GET/POST /dat-phong-online` - Äáº·t phÃ²ng online
- `GET/POST /nhan-phong` - Nháº­n/tráº£ phÃ²ng

### Thanh toÃ¡n
- `GET /thanh-toan-chua-hoan-tat` - Danh sÃ¡ch thanh toÃ¡n chÆ°a hoÃ n táº¥t
- `GET/POST /thanh-toan-dv/<id>` - Thanh toÃ¡n dá»‹ch vá»¥

### KhÃ¡ch hÃ ng & Giao tiáº¿p
- `GET /tin-nhan` - Quáº£n lÃ½ tin nháº¯n
- `GET /khach-hang` - Danh sÃ¡ch khÃ¡ch hÃ ng

### BÃ¡o cÃ¡o
- `GET /thong-ke-doanh-thu` - Thá»‘ng kÃª doanh thu
- `GET /thong-ke-khach` - Thá»‘ng kÃª khÃ¡ch hÃ ng

### Quáº£n lÃ½ nhÃ¢n viÃªn
- `GET/POST /attendance` - Cháº¥m cÃ´ng
- `GET /attendance/admin` - PhÃª duyá»‡t cháº¥m cÃ´ng
- `GET /nhan-vien` - Danh sÃ¡ch nhÃ¢n viÃªn
- `GET /luong-thuong` - Quáº£n lÃ½ lÆ°Æ¡ng thÆ°á»Ÿng

### CÃ i Ä‘áº·t
- `GET /cai-dat-email` - Cáº¥u hÃ¬nh email
- `GET /cai-dat-luong-thuong` - Cáº¥u hÃ¬nh lÆ°Æ¡ng thÆ°á»Ÿng

## Socket.IO Events

### Chat
- `join_room` - Tham gia phÃ²ng chat
- `send_message` - Gá»­i tin nháº¯n
- `receive_message` - Nháº­n tin nháº¯n

## Database Schema

### Báº£ng chÃ­nh
- `nguoidung` - NgÆ°á»i dÃ¹ng (nhÃ¢n viÃªn, admin)
- `loaiphong` - Loáº¡i phÃ²ng
- `phong` - PhÃ²ng
- `khachhang` - KhÃ¡ch hÃ ng
- `datphong` - Äáº·t phÃ²ng
- `dichvu` - Dá»‹ch vá»¥
- `sudungdv` - Sá»­ dá»¥ng dá»‹ch vá»¥
- `tinnhan` - Tin nháº¯n
- `email_log` - Lá»‹ch sá»­ email
- `voucher` - Voucher
- `attendance` - Cháº¥m cÃ´ng
- `luongnhanvien` - LÆ°Æ¡ng nhÃ¢n viÃªn
- `hethongcauhinh` - Cáº¥u hÃ¬nh há»‡ thá»‘ng

## Báº£o máº­t

- Rate limiting vá»›i Flask-Limiter
- Session timeout cho thanh toÃ¡n
- Authentication vá»›i Flask-Login
- Sanitize input vÃ  SQL injection protection qua SQLAlchemy
- CSRF protection (náº¿u cáº§n)

## PhÃ¡t triá»ƒn thÃªm

### TÃ­nh nÄƒng cÃ³ thá»ƒ má»Ÿ rá»™ng
- API RESTful cho mobile app
- TÃ­ch há»£p thanh toÃ¡n online (VNPay, Momo)
- Push notification
- Äa ngÃ´n ngá»¯
- PhÃ¢n tÃ­ch dá»¯ liá»‡u nÃ¢ng cao
- TÃ­ch há»£p AI chatbot

### ÄÃ³ng gÃ³p
1. Fork repository
2. Táº¡o branch feature má»›i
3. Commit changes
4. Push vÃ  táº¡o Pull Request

## Giáº¥y phÃ©p

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¡t triá»ƒn cho má»¥c Ä‘Ã­ch há»c táº­p vÃ  nghiÃªn cá»©u.

## LiÃªn há»‡

- **TÃ¡c giáº£**: HoÃ ng Anh Nam
- **TrÆ°á»ng**: Há»c viá»‡n CÃ´ng nghá»‡ BÆ°u chÃ­nh Viá»…n thÃ´ng (PTIT)
- **MÃ´n há»c**: Internet vÃ  Giao thá»©c
- **NÄƒm**: 2025

---

*Há»‡ thá»‘ng Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ Ä‘Ã¡p á»©ng cÃ¡c yÃªu cáº§u quáº£n lÃ½ khÃ¡ch sáº¡n hiá»‡n Ä‘áº¡i vá»›i giao diá»‡n thÃ¢n thiá»‡n vÃ  chá»©c nÄƒng toÃ n diá»‡n.*